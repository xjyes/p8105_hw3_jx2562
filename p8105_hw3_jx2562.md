p8105_hx3_jx562
================
Jingyi
2023-10-11

``` r
library(tidyverse)
```

## Problem 1

This problem aims to explore `instacart` data.

First, we loaded the data.

``` r
library(p8105.datasets)
data("instacart")
```

The data `instacart` has features as described below.

- The data has 15 observations and 1384617 variables.
- The data has variables named order_id, product_id, add_to_cart_order,
  reordered, user_id, eval_set, order_number, order_dow,
  order_hour_of_day, days_since_prior_order, product_name, aisle_id,
  department_id, aisle, department.
- There are 134 diffrent aisles, whose `aisle_id` range from 1 to 134.
- There are 39123 different product.
- Overall, the `order_number` ranges from 4 to 100 with a mean 17.09
- An example of the observations of the data is demonstrated below.

``` r
head(instacart, 3)
```

    ## # A tibble: 3 × 15
    ##   order_id product_id add_to_cart_order reordered user_id eval_set order_number
    ##      <int>      <int>             <int>     <int>   <int> <chr>           <int>
    ## 1        1      49302                 1         1  112108 train               4
    ## 2        1      11109                 2         1  112108 train               4
    ## 3        1      10246                 3         0  112108 train               4
    ## # ℹ 8 more variables: order_dow <int>, order_hour_of_day <int>,
    ## #   days_since_prior_order <int>, product_name <chr>, aisle_id <int>,
    ## #   department_id <int>, aisle <chr>, department <chr>

Then, we need to answer a few questions regarding the dataset.

1.  *How many aisles are there, and which aisles are the most items
    ordered from?*

- There are 134 different aisles.

``` r
aisle_order = instacart |>
  group_by(aisle) |>
  summarize(order_number_aisle = sum(order_number)) |>
  arrange(desc(order_number_aisle))
```

- The aisle where most items are ordered from and the number of order
  are fresh fruits, 2787084.

2.  *Make a plot that shows the number of items ordered in each aisle,
    limiting this to aisles with more than 10000 items ordered. *

``` r
aisle_order_10000 = instacart |>
  group_by(aisle_id) |>
  summarize(order_number_aisle = sum(order_number)) |>
  filter(order_number_aisle > 10000) |>
  mutate(aisle_id = as.factor(aisle_id))

ggplot(aisle_order_10000, aes(x = aisle_id, y = order_number_aisle)) +
  geom_bar(stat = "identity", fill = "steelblue",  width = 0.5) +
  labs(x = "Aisle ID", y = "Total Order Count", title = "Total Orders by Aisle (Aisles with > 10,000 Orders)") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 60, size = 6)) +
  scale_x_discrete(breaks = aisle_order_10000$aisle_id[1:nrow(aisle_order_10000) %% 3 == 0])
```

![](p8105_hw3_jx2562_files/figure-gfm/unnamed-chunk-5-1.png)<!-- --> \*
Given the aisle id, we can look up to the exact aisle name. There are
122 out of 134 which has an order number larger than 10000. The aisles
with top 5 total order number count are fresh fruits, fresh vegetables,
packaged vegetables fruits, yogurt, packaged cheese.

3.  *Make a table showing the three most popular items in each of the
    aisles “baking ingredients”, “dog food care”, and “packaged
    vegetables fruits”. Include the number of times each item is ordered
    in your table.*

``` r
aisle_times = instacart |>
  group_by(aisle) |>
  summarize(order_times = n()) |>
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) 
knitr::kable(aisle_times)
```

| aisle                      | order_times |
|:---------------------------|------------:|
| baking ingredients         |       13088 |
| dog food care              |        1612 |
| packaged vegetables fruits |       78493 |

- The number of times ordered is obtained by counting the number of
  order in each aisle for the three types of aisles. It shows that
  `packaged vegetables fruits` has the most order times.

4.  *Make a table showing the mean hour of the day at which Pink Lady
    Apples and Coffee Ice Cream are ordered on each day of the week.*

``` r
product_hour = instacart |>
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) |>
  group_by(product_name, order_dow) |>
  summarize(mean_order_hour = round(mean(order_hour_of_day),2)) |>
  pivot_wider(names_from = order_dow, values_from = mean_order_hour) 
```

    ## `summarise()` has grouped output by 'product_name'. You can override using the
    ## `.groups` argument.

``` r
colnames(product_hour)[2:8] = c("Sun","Mon","Tue","Wed","Thu","Fri","Sat")
knitr::kable(product_hour)
```

| product_name     |   Sun |   Mon |   Tue |   Wed |   Thu |   Fri |   Sat |
|:-----------------|------:|------:|------:|------:|------:|------:|------:|
| Coffee Ice Cream | 13.77 | 14.32 | 15.38 | 15.32 | 15.22 | 12.26 | 13.83 |
| Pink Lady Apples | 13.44 | 11.36 | 11.70 | 14.25 | 11.55 | 12.78 | 11.94 |

- The table shows the mean hour of the day at which the two product are
  ordered in terms of each day of the week.
